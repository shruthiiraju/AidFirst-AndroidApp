(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1004:function(e,t,i){"use strict";i.r(t);var o,r=i(20),a=i.n(r),n=i(438),d=i(64),s=i(10),l=i.n(s),h=i(444),c=i(33),u=i(115),p=i(460),f=i(486),v=(i(472),i(459)),m=i.n(v),y=i(458);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,i,r){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),t&&a)for(var d in a)void 0===t[d]&&(t[d]=a[d]);else t||(t=a||{});if(1===n)t.children=r;else if(n>1){for(var s=new Array(n),l=0;l<n;l++)s[l]=arguments[l+3];t.children=s}return{$$typeof:o,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function b(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function V(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var S=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))).handleSliderCardItem=function(e,t){e.preventDefault(),i.setState({playingVideoItem:t,activeSlide:t.id,slikeNextVideoAutoPlayed:!1})},i.handleClose=function(){i.setState({isVideoTheatreMinified:!1,playingVideoItem:void 0,activeSlide:void 0}),i.props.closeVideoTheatre()},i.videoEventListener=function(e,t){i.a="";var o=t?t[1]:"",r="",a="",n=i.state.bottomVideosSliderData.map(function(e){return e.id});switch(o){case"VIDEOREADY":r=t&&t.length>2&&t[2],i.setState({slikeNextVideoAutoPlayed:!0}),i.props.addNextVideoMsid(n[n.indexOf(r)+1]);break;case"VIDEOCOMPLETE":a=t&&t.length>0&&t[0].id,r=n[n.indexOf(a)+1]}},i.currArticleshowUrl={wu:"",hl:""},i.state={bottomVideosSliderData:[],playingVideoItem:void 0,isVideoTheatreMinified:!1,activeSlide:void 0,slikeNextVideoAutoPlayed:!0},i}var i,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),i=t,(o=[{key:"changeUrl",value:function(){var e=this.state.playingVideoItem;window.location.href.includes("/articleshow/")&&(this.currArticleshow={wu:window.location.href,hl:document.title});var t=e?e.wu.replace("https://timesofindia.indiatimes.com",""):this.currArticleshow.wu,i=e?e.hl:this.currArticleshow.hl;!window.history||window.location.href.indexOf(t)>=0||(window.history.pushState({},i,t),"undefined"!=typeof window&&window.ga&&-1!==t.indexOf("/videoshow/")&&(window.TimesGA&&window.TimesGA.setGAParams&&window.TimesGA.setGAParams({}),window.ga("send",{hitType:"pageview",page:t,location:t})))}},{key:"componentDidUpdate",value:function(e,t){var i=this,o=this.props,r=o.videoTheatreSliderPath,a=o.isVideoTheatreOpen,s=o.videoTheatreCurrMsid,l=this.state,h=l.isVideoTheatreMinified,c=l.activeSlide;(e.isVideoTheatreOpen===a||a||this.setState({isVideoTheatreMinified:!1,playingVideoItem:void 0,activeSlide:void 0}),e.videoTheatreCurrMsid!==s&&this.setState({isVideoTheatreMinified:!1}),t.isVideoTheatreMinified!==h&&h&&this.props.showMiniTvPlayer(!1),t.isVideoTheatreMinified===h||h)||(document.getElementsByTagName("body")[0].style.overflow=this.state.isVideoTheatreMinified?"hidden":"");if(a!==e.isVideoTheatreOpen&&a&&(this.props.deleteDockCandidate(),this.props.deleteUnDockCandidate()),a===e.isVideoTheatreOpen&&h===t.isVideoTheatreMinified&&c===t.activeSlide||this.changeUrl(),(e.videoTheatreSliderPath!==r||e.videoTheatreCurrMsid!==s)&&this.props.isVideoTheatreOpen){var u=r;if(r&&r.startsWith("https://")){var p=r.replace("https://timesofindia.indiatimes.com/","").replace(/\/videoshow\/\d+.cms/,"").split("/");p.pop(),u=Object(n.a)({path:"/".concat(p.join("/")),perpage:10})}else u=Object(n.a)({path:r,perpage:10});var f=this;d.a.get(u).then(function(e){if(200===e.status){var t=[];e.data&&e.data.data&&e.data.data.items?t=e.data.data.items:e.data.sections&&e.data.sections[0]&&e.data.sections[0].data&&(t=e.data.sections[0].data.items);var o=t||[];o&&o.length>10&&(o=o.slice(0,10));var r=i.props.videoTheatreCurrMsid,a=o.filter(function(e){return e.id===r});0===a.length&&(a=[i.props.videoTheatreCurrItem],o.unshift(i.props.videoTheatreCurrItem)),f.setState({bottomVideosSliderData:o,playingVideoItem:a?a[0]:void 0,activeSlide:r})}})}}},{key:"render",value:function(){var e=this,t=this.props,i=t.isUserPrime,o=t.isVideoTheatreOpen,r=this.state,a=r.bottomVideosSliderData,n=r.playingVideoItem;if(o&&0!==a.length&&n){var d=n.imageid.split("&"),s=this,l=a.filter(function(t){return t.id===e.state.activeSlide}),u=l.length>0?l[0].hl:"",p=this.props.videoTheatreCurrItem&&this.props.videoTheatreCurrItem.primeid?parseInt(this.props.videoTheatreCurrItem.primeid,10):0,f=p&&p>0;return T("div",{className:"".concat(m.a.video_theatreoverlay," ").concat(this.state.isVideoTheatreMinified?m.a.theatreDocked:"")},void 0,!Object(c.u)()&&T("button",{className:m.a.dockicon,type:"button",onClick:function(){e.setState({isVideoTheatreMinified:!e.state.isVideoTheatreMinified})}}),T("button",{type:"button",className:m.a.close,onClick:this.handleClose}),T(h.a,{autoplay:!0,slikeNextVideoAutoPlayed:this.state.slikeNextVideoAutoPlayed,videoClassName:m.a.video_theatrevideo,msid:n.id,imgsize:2===d.length?d[1]:"",playerContainerId:"".concat(n.id),isPrime:i,allowDim:!1,isUserPrime:i,isContentPrime:f,isVideoTheatreMinified:this.state.isVideoTheatreMinified,store:this.context.store,outsideEventListener:function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];if(i[1]&&"VIDEOREADY"===i[1][1]){var r=a.filter(function(e){return e.id===i[1][2]});s.setState({playingVideoItem:0!==r.length?r[0]:e.state.playingVideoItem,activeSlide:i[1][2]})}e.videoEventListener.apply(e,i)}}),T("p",{className:m.a.vdotxt},void 0," ",u),!this.state.isVideoTheatreMinified&&T(y.a,{items:a,handleSliderCardItem:this.handleSliderCardItem,activeSlide:this.state.activeSlide,isTablet:c.u}))}return""}}])&&b(i.prototype,o),r&&b(i,r),t}();S.defaultProps={isUserPrime:!1,videoTheatreSliderPath:"",isVideoTheatreOpen:!1,videoTheatreCurrMsid:"",videoTheatreCurrItem:{}},S.contextTypes={store:l.a.object.isRequired},t.default=Object(u.b)(function(e){return{isUserPrime:e.isPrime,isVideoTheatreOpen:e.articleshow.isVideoTheatreOpen,videoTheatreSliderPath:e.articleshow.videoTheatreSliderPath,videoTheatreCurrMsid:e.articleshow.videoTheatreCurrMsid,videoTheatreCurrItem:e.articleshow.videoTheatreCurrItem,isMiniTvPlayerShown:e.miniTv.showMiniTvPlayer}},function(e){return{closeVideoTheatre:function(){e(Object(p.d)())},openVideoTheatre:function(){e(Object(p.m)())},addNextVideoMsid:function(t){e(Object(p.b)(t))},deleteDockCandidate:function(){e(Object(p.e)())},deleteUnDockCandidate:function(){e(Object(p.f)())},showMiniTvPlayer:function(t){e(Object(f.b)(t))}}})(S)},472:function(e,t,i){}}]);
//# sourceMappingURL=VideoTheater.5d9f1fdf.chunk.js.map