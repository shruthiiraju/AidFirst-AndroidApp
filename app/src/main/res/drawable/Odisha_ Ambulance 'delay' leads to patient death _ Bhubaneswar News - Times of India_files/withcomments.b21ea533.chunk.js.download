(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{601:function(e,t,o){"use strict";o.r(t);var n=o(20),i=o.n(n),r=o(115),s=o(55),a=o.n(s),c=o(426),l=o.n(c),p=o(116),m=o.n(p),d=(o(10),o(33)),u=o(700),h=o(460),f=o(521),g=o(448);function v(){return"Refrain from posting comments that are obscene, defamatory or inflammatory,\n\t\t\t and do not indulge in personal attacks, name calling or inciting hatred\n\t\t\t against any community. Help us delete comments that do not follow these\n\t\t\t guidelines by marking them offensive. Let's work together to keep the\n\t\t\t conversation civil."}var b=o(461),y=o(965),_=o.n(y),w=o(966),C=o.n(w),S=o(968),x=o.n(S),O=o(969),k=o.n(O),N={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden"},I={zIndex:2,position:"absolute",top:0,bottom:0,transition:"transform .3s ease-out",WebkitTransition:"-webkit-transform .3s ease-out",willChange:"transform",overflowY:"auto"},T={position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",WebkitOverflowScrolling:"touch",transition:"left .3s ease-out, right .3s ease-out"},P={zIndex:1,position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0,visibility:"hidden",transition:"opacity .3s ease-out, visibility .3s ease-out",backgroundColor:"rgba(0,0,0,.3)"},D={zIndex:1,position:"fixed",top:0,bottom:0},j=function(e){function t(t){var o;return(o=e.call(this,t)||this).state={sidebarWidth:t.defaultSidebarWidth,touchIdentifier:null,touchStartX:null,touchCurrentX:null,dragSupported:!1},o.overlayClicked=o.overlayClicked.bind(k()(k()(o))),o.onTouchStart=o.onTouchStart.bind(k()(k()(o))),o.onTouchMove=o.onTouchMove.bind(k()(k()(o))),o.onTouchEnd=o.onTouchEnd.bind(k()(k()(o))),o.onScroll=o.onScroll.bind(k()(k()(o))),o.saveSidebarRef=o.saveSidebarRef.bind(k()(k()(o))),o}x()(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=/iPad|iPhone|iPod/.test(navigator?navigator.userAgent:"");this.setState({dragSupported:"object"==typeof window&&"ontouchstart"in window&&!e}),this.saveSidebarWidth()},o.componentDidUpdate=function(){this.isTouching()||this.saveSidebarWidth()},o.onTouchStart=function(e){if(!this.isTouching()){var t=e.targetTouches[0];this.setState({touchIdentifier:t.identifier,touchStartX:t.clientX,touchCurrentX:t.clientX})}},o.onTouchMove=function(e){if(this.isTouching())for(var t=0;t<e.targetTouches.length;t++)if(e.targetTouches[t].identifier===this.state.touchIdentifier){this.setState({touchCurrentX:e.targetTouches[t].clientX});break}},o.onTouchEnd=function(){if(this.isTouching()){var e=this.touchSidebarWidth();(this.props.open&&e<this.state.sidebarWidth-this.props.dragToggleDistance||!this.props.open&&e>this.props.dragToggleDistance)&&this.props.onSetOpen(!this.props.open),this.setState({touchIdentifier:null,touchStartX:null,touchCurrentX:null})}},o.onScroll=function(){this.isTouching()&&this.inCancelDistanceOnScroll()&&this.setState({touchIdentifier:null,touchStartX:null,touchCurrentX:null})},o.inCancelDistanceOnScroll=function(){return this.props.pullRight?Math.abs(this.state.touchCurrentX-this.state.touchStartX)<20:Math.abs(this.state.touchStartX-this.state.touchCurrentX)<20},o.isTouching=function(){return null!==this.state.touchIdentifier},o.overlayClicked=function(){this.props.open&&this.props.onSetOpen(!1)},o.saveSidebarWidth=function(){var e=this.sidebar.offsetWidth;e!==this.state.sidebarWidth&&this.setState({sidebarWidth:e})},o.saveSidebarRef=function(e){this.sidebar=e},o.touchSidebarWidth=function(){return this.props.pullRight?this.props.open&&window.innerWidth-this.state.touchStartX<this.state.sidebarWidth?this.state.touchCurrentX>this.state.touchStartX?this.state.sidebarWidth+this.state.touchStartX-this.state.touchCurrentX:this.state.sidebarWidth:Math.min(window.innerWidth-this.state.touchCurrentX,this.state.sidebarWidth):this.props.open&&this.state.touchStartX<this.state.sidebarWidth?this.state.touchCurrentX>this.state.touchStartX?this.state.sidebarWidth:this.state.sidebarWidth-this.state.touchStartX+this.state.touchCurrentX:Math.min(this.state.touchCurrentX,this.state.sidebarWidth)},o.render=function(){var e,t=C()({},I,this.props.styles.sidebar),o=C()({},T,this.props.styles.content),n=C()({},P,this.props.styles.overlay),r=this.state.dragSupported&&this.props.touch,s=this.isTouching(),a={className:this.props.rootClassName,style:C()({},N,this.props.styles.root),role:"navigation",id:this.props.rootId},c=this.props.shadow&&(s||this.props.open||this.props.docked);if(this.props.pullRight?(t.right=0,t.transform="translateX(100%)",t.WebkitTransform="translateX(100%)",c&&(t.boxShadow="-2px 2px 4px rgba(0, 0, 0, 0.15)")):(t.left=0,t.transform="translateX(-100%)",t.WebkitTransform="translateX(-100%)",c&&(t.boxShadow="2px 2px 4px rgba(0, 0, 0, 0.15)")),s){var l=this.touchSidebarWidth()/this.state.sidebarWidth;this.props.pullRight?(t.transform="translateX("+100*(1-l)+"%)",t.WebkitTransform="translateX("+100*(1-l)+"%)"):(t.transform="translateX(-"+100*(1-l)+"%)",t.WebkitTransform="translateX(-"+100*(1-l)+"%)"),n.opacity=l,n.visibility="visible"}else this.props.docked?(0!==this.state.sidebarWidth&&(t.transform="translateX(0%)",t.WebkitTransform="translateX(0%)"),this.props.pullRight?o.right=this.state.sidebarWidth+"px":o.left=this.state.sidebarWidth+"px"):this.props.open&&(t.transform="translateX(0%)",t.WebkitTransform="translateX(0%)",n.opacity=1,n.visibility="visible");if(!s&&this.props.transitions||(t.transition="none",t.WebkitTransition="none",o.transition="none",n.transition="none"),r)if(this.props.open)a.onTouchStart=this.onTouchStart,a.onTouchMove=this.onTouchMove,a.onTouchEnd=this.onTouchEnd,a.onTouchCancel=this.onTouchEnd,a.onScroll=this.onScroll;else{var p=C()({},D,this.props.styles.dragHandle);p.width=this.props.touchHandleWidth,this.props.pullRight?p.right=0:p.left=0,e=i.a.createElement("div",{style:p,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchEnd})}return i.a.createElement("div",a,i.a.createElement("div",{className:this.props.sidebarClassName,style:t,ref:this.saveSidebarRef,id:this.props.sidebarId},this.props.sidebar),i.a.createElement("div",{className:this.props.overlayClassName,style:n,onClick:this.overlayClicked,id:this.props.overlayId}),i.a.createElement("div",{className:this.props.contentClassName,style:o,id:this.props.contentId},e,this.props.children))},t}(n.Component);j.defaultProps={docked:!1,open:!1,transitions:!0,touch:!0,touchHandleWidth:20,pullRight:!1,shadow:!0,dragToggleDistance:30,onSetOpen:function(){},styles:{},defaultSidebarWidth:0};var F,E=j,B=o(435),R=o(475),A=o(970),M=o.n(A),L=o(419),V=o(432);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t,o,n){F||(F="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});if(1===r)t.children=n;else if(r>1){for(var a=new Array(r),c=0;c<r;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:F,type:e,key:void 0===o?null:""+o,ref:null,props:t,_owner:null}}function W(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){X(e,t,o[t])})}return e}function X(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function z(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e,t,o){window.ga&&window.ga("send","event",e,t,o)}var K=H("h3",{},void 0,"Continue without login"),Z=H("span",{},void 0,"or"),J=H("h3",{},void 0,"Login from existing account"),Y=H("small",{},void 0,"Facebook"),Q=H("small",{},void 0,"Google"),$=H("small",{},void 0,"Email"),ee=H("span",{},void 0,"Share on Facebook"),te=H("span",{},void 0,"Share on Twitter"),oe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))).handleCommentBoxInput=function(t){e.setState({commentBoxInput:t.target.value})},e.inputChangeName=function(t){var o=t.target.value;e.setState({name:o})},e.inputChangeEmail=function(t){var o=t.target.value;e.setState({email:o})},e.inputChangeLoc=function(t){var o=t.target.value;e.setState({loc:o})},e.inputChangeCaptcha=function(t){var o=t.target.value;e.setState({captcha:o})},e.alphaOnly=function(e){return/^[A-z\s]+$/.test(e)},e.email=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},e.isNonLoggedInFormValid=function(){var t=!1,o="",n={},i=e.state,r=i.name,s=i.email,a=i.loc,c=i.captcha;return n.name=r.trim(),n.email=s.trim(),n.loc=a.trim(),n.captcha=c.trim(),0===n.name.length?o=e.messages.name_required:e.alphaOnly(n.name)?0===n.email.length?o=e.messages.email_required:e.email(n.email)?0===n.loc.length?o=e.messages.location_required:e.alphaOnly(n.loc)?n.captcha?isNaN(n.captcha)||parseInt(n.captcha,10)!==e.captchaSum?o=e.messages.captcha_invalid:t=!0:o=e.messages.captcha_required:o=e.messages.location_not_string:o=e.messages.email_invalid:o=e.messages.name_not_string,e.setState({errorMsg:o}),{validForm:t,user:n}},e.postToSocial=function(t){var o=W({},e.socialSiteObj(),{message:t}),n=!1,i=!1;e.twitterRef&&e.twitterRef.current&&e.twitterRef.current.checked&&(e.postToTwitter(o),n=!0),e.fbRef&&e.fbRef.current&&e.fbRef.current.checked&&(Object(d.w)(e.postToFB(o)),i=!0),n&&G("comment","submit-twtshare-comment_section","msid_".concat(e.props.pageMsid)),i&&G("comment","submit-fbshare-comment_section","msid_".concat(e.props.pageMsid))},e.socialSiteObj=function(){var t=e.props.seoData;return{link:t.canonical||e.getMeta("og:url"),title:t.title||e.getMeta("og:title"),domain:window.location.host,picture:t.ogimage||e.getMeta("og:image"),desc:t.description||e.getMeta("og:description")}},e.getMeta=function(e){if(!e)return"";var t="",o=document.querySelector("meta[property='".concat(e,"']"));return o&&(t=o.getAttribute("content")),t},e.postToFB=function(e){window.FB.ui({method:"feed",message:e.message,name:e.title,link:e.link,picture:e.picture,caption:e.domain,description:e.desc})},e.postToTwitter=function(e){window.open("https://twitter.com/intent/tweet?text=".concat(escape(e.message)," - ").concat(e.link,"&original_referer=https://").concat(window.location.hostname,"/share.cms"),"socialPost","width=600,height=230,left=383,top=249,scrollbars=0,resizable=false")},e.showDisclaimer=function(){var t={},o=!1,n=e.props.isUserLoggedin(e.props.userData);e.state.showDisclaimer||(t.showDisclaimer=!0,o=!0),n||e.state.showLoginBox||(t.showLoginBox=!0,o=!0),o&&e.setState(W({},t))},e.showLoginScreen=function(){e.checkIfCommentIsEmpty()&&e.props.openLoginBox(!0)},e.loginWithFb=function(){e.checkIfCommentIsEmpty()&&Object(V.d)()},e.loginWithGoogle=function(){e.checkIfCommentIsEmpty()&&Object(V.e)()},e.checkIfCommentIsEmpty=function(){var t=!0,o=e.state.commentBoxInput;return o&&o.trim()||(e.showError(e.messages.empty_message),t=!1),t},e.closeCommentReply=function(){e.props.showAddCommentBox(!1)},e.state={isCommentWriteBoxVisible:!0,errorMsg:"",showLoginBox:!1,showDisclaimer:!1,name:"",email:"",loc:"",captcha:"",commentBoxInput:""},e.captchaSum=0,e.messages={name_required:"Please enter your name.",location_required:"Please enter your location.",captcha_required:"Please enter captcha value.",name_toolong:"Name cannot be longer than 30 chars.",name_not_string:"Name can only contain alphabets.",location_toolong:"Location cannot be longer than 30 chars.",location_not_string:"Location can only contain alphabets.",captcha_toolong:"Captcha cannot be longer than 4 chars.",captcha_number_only:"Captcha value can only be a number.",captcha_invalid:"Please enter a valid captcha value.",email_required:"Please enter your email address.",email_invalid:"Please enter a valid email address.",empty_message:"You can't post this review as it is blank."},e.fbRef=i.a.createRef(),e.twitterRef=i.a.createRef(),e}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),o=t,(n=[{key:"componentWillMount",value:function(){this.captchaText=this.getCaptchaText()}},{key:"getCaptchaText",value:function(){var e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random()),o=e+t;return this.captchaSum=o,"".concat(e,"+").concat(t,"=")}},{key:"onKeyPress",value:function(e){13===e.which&&this.addComment()}},{key:"resetCommentBox",value:function(){this.setState({commentBoxInput:""})}},{key:"showError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({errorMsg:e})}},{key:"addComment",value:function(){var e,t,o=this.state.commentBoxInput,n=this.props.isUserLoggedin(this.props.userData);if(!n){var i=this.isNonLoggedInFormValid();if(!i.validForm)return;t=W({},i.user)}if(this.checkIfCommentIsEmpty()){this.showError(),this.props.getParentComment&&"function"==typeof this.props.getParentComment&&(e=this.props.getParentComment());var r=e&&e.msid||0,s=this.props.getMsid&&this.props.getMsid()||0,a=this.props.pageMsid,c={message:o,rootid:r,parentid:s,ArticleID:a,msid:a};n?(this.props.handleAddComment(c),this.setState({showVerifyMessage:!1}),this.postToSocial(c.message)):(this.props.handleAddComment(c,t),this.setState({showVerifyMessage:!0})),this.resetCommentBox(),this.props.toggleResponses&&this.props.toggleResponses(!0),this.props.showAddCommentBox&&this.props.showAddCommentBox(!1),G(window&&window.categoryForGA?"".concat(window.categoryForGA):"WEB-".concat(window.location.href),"comment-submit-comment_section","msid_".concat(this.props.pageMsid))}}},{key:"getLoginBox",value:function(){var e=this,t=this.props.styles;return H("div",{className:"".concat(t.signinform," clearfix")},void 0,H("div",{className:"clearfix"},void 0,H("div",{className:t.signin},void 0,K,H("input",{className:t.textbox,placeholder:"Full Name",onChange:function(t){return e.inputChangeName(t)},value:this.state.name,maxLength:"30"}),H("input",{className:t.textbox,placeholder:"Email",onChange:function(t){return e.inputChangeEmail(t)},value:this.state.email}),H("input",{className:"".concat(t.textbox," ").concat(t.location),placeholder:"Location",onChange:function(t){return e.inputChangeLoc(t,"loc")},value:this.state.loc,maxLength:"30"}),H("span",{className:"".concat(t.mathbox," clearfix")},void 0,H("span",{},void 0,this.captchaText),H("input",{className:t.textbox,onChange:function(t){return e.inputChangeCaptcha(t)},value:this.state.captcha,maxLength:"4"}))),H("div",{className:t.divider},void 0,Z),H("div",{className:t.socialsignin},void 0,J,H("span",{className:t.fb,title:"Facebook",onClick:function(){e.loginWithFb()}},void 0,Y),H("span",{className:t.google,title:"Google",onClick:function(){return e.loginWithGoogle()}},void 0,Q),H("span",{className:t.email,title:"Email",onClick:function(){return e.showLoginScreen()}},void 0,$))))}},{key:"render",value:function(){var e=this,t=this.props.isUserLoggedin(this.props.userData),o=this.props.renderUserIcon(),n=this.props.styles,r=this.props.mainCommentBox&&this.props.showFixedHeader;return i.a.createElement(i.a.Fragment,null,this.state.isCommentWriteBoxVisible&&H("div",{className:r?n.commenttopareafixed:""},void 0,H("div",{className:"".concat(n.comment_input," ").concat(n.top_input," ").concat(this.props.isWapView?n.mobile:"")},void 0,!this.props.prime&&o,this.props.mainCommentBox&&i.a.createElement("textarea",{id:"comment-sidebar-input-".concat(this.props.pageMsid),type:"text",placeholder:"Leave a comment…","aria-label":"leave comment",cols:"40",rows:"5",maxLength:"3000",ref:this.props.commentTextInputRef,onKeyPress:function(t){return e.onKeyPress(t)},onFocus:function(){return e.showDisclaimer()},onChange:this.handleCommentBoxInput,value:this.state.commentBoxInput}),!this.props.mainCommentBox&&H("textarea",{type:"text",placeholder:"Leave a comment…","aria-label":"leave comment",cols:"40",rows:"5",maxLength:"3000",onKeyPress:function(t){return e.onKeyPress(t)},onFocus:function(){return e.showDisclaimer()},onChange:this.handleCommentBoxInput,value:this.state.commentBoxInput}),H("button",{"aria-label":"add comment",onClick:function(){return e.addComment()}}),H("span",{className:n.numbertxt},void 0,this.state.commentBoxInput.length,"/3000"),this.props.showCloseButton&&H("div",{className:n.close,onClick:function(){e.closeCommentReply()}},void 0,"+")),this.state.errorMsg&&H("div",{className:n.commentposterror},void 0,this.state.errorMsg),this.state.showLoginBox&&this.getLoginBox(),!this.props.prime&&!this.props.isWapView&&t&&this.state.showDisclaimer&&H("div",{className:"".concat(n.socialpost," clearfix")},void 0,H("label",{className:n.fb},void 0,H("i",{className:n.iconfb}),i.a.createElement("input",{type:"checkbox",ref:this.fbRef}),ee),H("label",{className:n.twitter},void 0,H("i",{className:n.icontwitter}),i.a.createElement("input",{type:"checkbox",ref:this.twitterRef}),te)),this.state.showDisclaimer&&H("p",{className:n.disclaimer},void 0," ",this.props.disclaimer()),this.props.showVerificationMsg&&this.state.showVerifyMessage&&H("div",{className:n.commentverificationmsg},void 0,"We have sent you a verification email. To verify, just follow the link in the message"),r&&H("span",{className:n.closefixheadersection,onClick:function(){return e.props.hideFixedHeader()}},void 0,"HIDE")))}}])&&z(o.prototype,n),r&&z(o,r),t}();oe.defaultProps={userData:void 0,getParentComment:void 0,getMsid:void 0,toggleResponses:void 0,showAddCommentBox:void 0,showCloseButton:!1,prime:!1,isWapView:!1,mainCommentBox:!1,disclaimer:function(){},showVerificationMsg:!1,showFixedHeader:!1,hideFixedHeader:function(){},seoData:{}};var ne=oe,ie=o(429);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var ce,le,pe,me,de,ue,he,fe,ge=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ae(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))).state={},o}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),o=t,(n=[{key:"componentDidMount",value:function(){if(this.myRef&&!this.unmounted){var e=this.myRef;Object(ie.b)(e).y>e.offsetHeight&&this.setState({showAbove:!0})}}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var e=this,t="",o=this.props.styles;return t=this.state.showAbove?o.tooltip_up:"tooltip_down",i.a.createElement("div",{className:"".concat(o.point_tooltip," ").concat(t),ref:function(t){e.myRef=t}},this.props.data)}}])&&se(o.prototype,n),r&&se(o,r),t}(),ve=o(422),be=o(50),ye=o(507);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t,o,n){fe||(fe="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});if(1===r)t.children=n;else if(r>1){for(var a=new Array(r),c=0;c<r;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:fe,type:e,key:void 0===o?null:""+o,ref:null,props:t,_owner:null}}function Ce(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e,t,o,n,i){var r={};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=o.slice().reverse().reduce(function(o,n){return n(e,t,o)||o},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}function Oe(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ke,Ne,Ie,Te,Pe,De,je=we("h4",{},void 0,"Badges Earned"),Fe=we("h4",{},void 0,"Find this comment offensive?"),Ee=we("h6",{},void 0,"Reason for reporting:"),Be=we("li",{},void 0,we("label",{},void 0,we("input",{type:"radio",name:"radio1",value:"Foul language"}),we("span",{},void 0,"Foul language"))),Re=we("li",{},void 0,we("label",{},void 0,we("input",{type:"radio",name:"radio1",value:"Defamatory"}),we("span",{},void 0,"Defamatory"))),Ae=we("li",{},void 0,we("label",{},void 0,we("input",{type:"radio",name:"radio1",value:"Inciting hatred against a certain community"}),we("span",{},void 0,"Inciting hatred against a certain community"))),Me=we("li",{},void 0,we("label",{},void 0,we("input",{type:"radio",name:"radio1",value:"Out of context/Spam"}),we("span",{},void 0,"Out of context/Spam"))),Le=we("li",{},void 0,we("label",{},void 0,we("input",{type:"radio",name:"radio1",value:"Others"}),we("span",{},void 0,"Others"))),Ve=(ce=Object(ve.a)({}),le=Object(ve.a)({}),pe=Object(ve.a)({}),me=Object(ve.a)({}),he=ue=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?Se(e):t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))).textAreaHandler=function(t){e.setState({othersTextAreaVal:t.target.value})},e.onFlagRequestComplete=function(){Object(ye.c)(e.msid,"103",0,1,b.a.OFFENSIVE),e.setState({flagRequestComplete:!0})},e.onFlagSubmit=function(){var t=e.props,o=t.userData,n=t.data;if(e.flagReason&&e.flagReason.trim()&&("others"!==e.flagReason.toLowerCase()||e.state.othersTextAreaVal.trim())){var i=e.props.isUserLoggedin(e.props.userData)?"1":"0",r={ofreason:e.flagReason,ofusername:o.getFullName(),ofcommenteroid:n._id,ofcommentid:e.props.pageMsid,ofuserisloggedin:i,ofuserssoid:o.getEmail(),ofuseremail:o.getEmail()};e.props.hideFlag(e.props.data._id),e.props.onFlagComment(r,e.onFlagRequestComplete)}else e.setState({showFlagErrorForNoSelection:!0})},e.getParentComment=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se(e);return t.getParentComment?t.getParentComment(e.props.parent):Se(e)},e.getImmediateParent=function(){return e.props.parent},e.getMsid=function(){return e.props.data._id},e.renderNextLevelOverlay=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=t.pointsNeeded(o),r=e.props.styles;return we(i.a.Fragment,{},void 0,we("p",{},void 0,we("strong",{},void 0,n)," more points needed to reach next level."),we("a",{href:"".concat(be.l,"/abouttimesrewards.cms"),className:r.more,target:"_blank",rel:"noopener noreferrer"},void 0,"Know more about Times Points"))},e.renderBadges=function(t){if(!t)return null;var o=t.activityBadge||{},n=e.props.styles;return we("div",{},void 0,we("div",{className:n["heading-block"]},void 0,je),we("div",{className:"".concat(n.content," ").concat(n.clearfix)},void 0,o.map(function(e,t){return we("div",{className:n.section},t,we("img",{className:n.badge,src:e.currentBadge.bimg,alt:""}),we("p",{},void 0,e.currentBadge.bname),we("div",{className:n.badgepoint},void 0,e.currentBadge.level))}),we("p",{className:n["more-info"]},void 0,we("a",{href:"".concat(be.l,"/abouttimesrewards.cms"),className:n.more,target:"_blank",rel:"noopener noreferrer"},void 0,"Know more about Times Points"))))},e.renderFlagForm=function(){var t=e.props.styles;return we("div",{},void 0,we("div",{className:t["heading-block"]},void 0,Fe),we("div",{className:"".concat(t.content," ").concat(t.clearfix)},void 0,we("span",{className:t["success-message"]},void 0,"Your reason has been submitted to the Admin."),we("span",{className:t["info-txt"]},void 0,"Choose your reason below and click on the Submit button. This will alert our moderators to take action"),Ee,we("ul",{className:t.reasons,onChange:function(t){return e.onReasonChange(t)}},void 0,Be,Re,Ae,Me,Le,e.state.shouldShowFlagReasonBox&&we("li",{},void 0,i.a.createElement("textarea",{ref:function(t){e.domRefs.reasonTextArea=t||e.domRefs.reasonTextArea},className:t.offensive_popup_reason,value:e.state.othersTextAreaVal,onChange:function(t){return e.textAreaHandler(t)}}))),e.state.showFlagErrorForNoSelection&&we("div",{className:t.error},void 0,"Please enter a reason"),we("div",{className:t.buttons},void 0,we("span",{className:"".concat(t.button," ").concat(t.submit),onClick:e.onFlagSubmit},void 0,"Report this !"),we("span",{className:"".concat(t.button," ").concat(t.close_popup),onClick:e.onFlagClick},void 0,"Close"))))},e.onReasonChange=function(t){e.flagReason=t&&t.target.value?t.target.value.toLowerCase():"",e.flagReason&&e.flagReason.trim()&&e.setState({showFlagErrorForNoSelection:!1}),e.showFlagReasonBox(t)},e.showFlagReasonBox=function(t){var o=!1,n=t&&t.target.value?t.target.value.toLowerCase():"";t.target!==e.domRefs.reasonTextArea&&("others"===n&&(o=!0),e.setState({shouldShowFlagReasonBox:o}))},e.onFlagClick=function(){e.props.onFlagClick(e.props.data)},e.handleAddComment=function(t,o){e.props.handleAddComment(t,o),e.toggleResponses(!0)},e.followUser=function(t){e.props.followUser(t)},e.handleShowMoreComment=function(){e.setState({showMoreComment:!0})},e.showAllResponses=function(){e.setState({showAllReplies:!0})},e.state={shouldShowResponses:!1,shouldShowAddCommentBox:!1,flagRequestComplete:!1,shouldShowFlagReasonBox:!1,showFlagErrorForNoSelection:!1,showMoreComment:!1,othersTextAreaVal:"",showAllReplies:!1},e.domRefs={},e.flagReason="",e.onVoteUp=e.onVoteUp.bind(Se(e)),e.onVoteDown=e.onVoteDown.bind(Se(e)),e.showAddCommentBox=e.showAddCommentBox.bind(Se(e)),e.toggleResponses=e.toggleResponses.bind(Se(e)),e.handleShowHideResponse=e.handleShowHideResponse.bind(Se(e)),e}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),o=t,r=[{key:"pointsNeeded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="";return 0===parseInt(e,10)||e<250?t=250-e:e>249&&e<5e3?t=5e3-e:e>4999&&e<25e3?t=25e3-e:e>24999&&e<25e4&&(t=25e4-e),t}}],(n=[{key:"onVoteUp",value:function(){this.props.putVote(this.props.data,!0)}},{key:"onVoteDown",value:function(){this.props.putVote(this.props.data)}},{key:"showAddCommentBox",value:function(e){var t="boolean"!=typeof e||e;this.setState({shouldShowAddCommentBox:t}),e||this.props.resetCommentBoxId()}},{key:"toggleResponses",value:function(e){var t="boolean"==typeof e?e:!this.state.shouldShowResponses;this.setState({shouldShowResponses:t,showAllReplies:!1})}},{key:"handleShowHideResponse",value:function(){this.toggleResponses()}},{key:"render",value:function(){var e=this,t=this.props.data,o=t.F_NAME,n=t.A_D_N,i=t.CITY,r=t.C_D,s=t.C_A_ID,a=t.addedNow,c=t.C_T,l=t.CHILD,p=t.AC_A_C,m=t.AC_D_C,u=t.user_reward,h=t.user_reward_point_info,f=this.props.styles,g=this.props,v=g.data,b=g.shouldShowFlagForm,y=g.isPrivateUser,_=v.user_detail&&v.user_detail.thumb?v.user_detail.thumb:"",w=!(!v.user_detail||!v.user_detail.U_P_S||-1===[1,3,4,5,8].indexOf(parseInt(v.user_detail.U_P_S,10))),C=this.state,S=C.shouldShowResponses,x=C.shouldShowAddCommentBox,O=C.flagRequestComplete,k=u&&u.levelName?u.levelName.toLowerCase():"",N=this.props,I=N.parentUserName,T=N.isParent,P=M()(c),D=v.user_detail&&v.user_detail.CITY?v.user_detail.CITY:i,j=n||o,F=v.user_detail&&v.user_detail.D_N_U?v.user_detail.D_N_U:null,E=v.user_detail&&v.user_detail._id?v.user_detail._id:null,B=s,R=this.props.isUserLoggedin(this.props.userData)?"1":"0",A=parseInt(v.user_detail&&v.user_detail.F_C?v.user_detail.F_C:0,10),V="";A>0&&(V="( ".concat(A," ").concat(A>1?"followers":"follower"," )"));var U=function e(t){if(!t||0===t.length)return[];for(var o=Oe(t),n=[],i=0;i<t.length;i+=1)t[i].CHILD&&t[i].CHILD.length>0?n.splice.apply(n,[n.length,0,o[i]].concat(Oe(e(t[i].CHILD)))):n.splice(n.length,0,o[i]);return n}(l),H=this.props.userData&&"function"==typeof this.props.userData.getId?this.props.userData.getId():"";return we("li",{className:"".concat(f.comments_list," ").concat(B?f.aucmt:""," ").concat(!this.props.isPrime&&this.props.isHighlighted?f.highlighted:""," ").concat(y?f.gdpr:""," ").concat(w?f.primeuser:"")},void 0,we("div",{className:"".concat(f.header," ").concat(T?f.level1:"")},void 0,!y&&T&&this.props.renderUserIcon(_,"comment-profile_photo-comment_section|userid_".concat(E)),we("h3",{"data-ga":"comment-profile_name-comment_section|userid_".concat(E),className:f.cmtname},void 0,y||!F&&!E?Object(d.a)(j||""):we(L.a,{href:"http://mytimes.indiatimes.com/profile/".concat(F||E),target:"_blank",rel:"noopener noreferrer","data-ga":"comment-profile_name-comment_section|userid_".concat(E)},void 0,Object(d.a)(j||""))),!y&&we("div",{className:f.point_container},void 0,u&&u.statusPoints>0&&we("div",{className:f.tooltip_wrap},void 0,we("span",{className:f[k]},void 0,u.statusPoints),we(ge,{data:this.renderNextLevelOverlay(u.statusPoints),styles:f})),h&&h.activityBadge&&h.activityBadge.length>3&&we("div",{className:f.badges},void 0,we(ge,{data:this.renderBadges(h),styles:f})))),!this.props.isPrime&&we("div",{className:f.user_details},void 0,I&&we("span",{className:f.metadata},void 0,we("i",{className:f.iconreply}),Object(d.a)(I)),D&&"unknown"!==D.toLowerCase()&&we("span",{className:f.userLocation,dangerouslySetInnerHTML:{__html:D}}),!a&&r&&we("span",{className:f.postTime},void 0,r),a&&we("span",{className:f.postTime},void 0,"Just Now"),o&&!this.props.isFollowee&&"1"===R&&v.user_detail&&v.user_detail._id&&H!==v.user_detail._id&&we("span",{className:f.follow,onClick:function(){return e.followUser(v.user_detail._id)},title:"Follow ".concat(o," ").concat(V)},void 0,"Follow"),this.props.isFollowee&&we("span",{className:f.userfollowing},void 0,we("span",{className:f.following,title:"Following ".concat(o," ").concat(V)},void 0,we("i",{className:f.iconfollow}),"Following"))),P.length>500&&!this.state.showMoreComment&&we("div",{className:f.comment_text},void 0,we("div",{className:f.truncated,dangerouslySetInnerHTML:{__html:"".concat(P.substr(0,500)," ... ")}}),we("span",{className:f.readmorecomment,onClick:function(){return e.handleShowMoreComment()}},void 0,"Read More")),(P.length<=500||P.length>500&&this.state.showMoreComment)&&we("div",{className:f.comment_text,dangerouslySetInnerHTML:{__html:P}}),!y&&!a&&we("div",{className:f.comment_actions},void 0,we("a",{onClick:function(t){return e.showAddCommentBox(t)},"data-ga":"comment-reply-comment_section|msid_".concat(this.props.pageMsid),className:f.comment_reply},void 0,"Reply"),T&&l&&!S&&we("a",{"data-ga":"comment-show_responses-comment_section|commentid_".concat(this.getMsid()),onClick:this.handleShowHideResponse,className:f.comment_response},void 0,"Show responses"),T&&l&&S&&we("a",{"data-ga":"comment-hide_responses-comment_section|commentid_".concat(this.getMsid()),onClick:this.handleShowHideResponse},void 0,"Hide responses"),we("span",{className:f.upContainer,"data-ga":"comment-upvote-comment_section|commentid_".concat(this.getMsid()),onClick:this.onVoteUp},void 0,we("i",{className:f.voteUp}),we("span",{},void 0,p)),we("span",{className:f.downContainer,"data-ga":"comment-downvote-comment_section|commentid_".concat(this.getMsid()),onClick:this.onVoteDown},void 0,we("i",{className:f.voteDown}),we("span",{},void 0,m)),O&&we("span",{className:f.flagComment},void 0,this.props.isPrime?"":"flagged"),!O&&we("span",{className:f.flagComment},void 0,we("a",{onClick:this.onFlagClick,className:f.flagicon},void 0,this.props.isPrime?"":"flag"),b&&we(ge,{data:this.renderFlagForm(),styles:f}))),this.props.errorMsg&&we("div",{className:f.error},void 0,this.props.errorMsg),!y&&(x||this.props.openCommentBox)&&we(ne,{showAddCommentBox:this.showAddCommentBox,toggleResponses:this.toggleResponses,userData:this.props.userData,openLoginBox:this.props.openLoginBox,isUserLoggedin:this.props.isUserLoggedin,handleAddComment:this.handleAddComment,pageMsid:this.props.pageMsid,getMsid:this.getMsid,getImmediateParent:this.getImmediateParent,getParentComment:this.getParentComment,renderUserIcon:this.props.renderUserIcon,disclaimer:this.props.disclaimer,showCloseButton:!0,styles:this.props.styles,prime:this.props.isPrime,isWapView:this.props.isWapView,commentTextInputRef:this.props.commentTextInputRef,showVerificationMsg:this.props.showVerificationMsg,seoData:this.props.seoData}),we("div",{className:f.indentRight},void 0,(S||!T)&&this.props.level<1&&this.props.renderCommentList(this.state.showAllReplies?U:U.slice(0,3),this,this.props.level+1),(S||!T)&&0===this.props.level&&!this.state.showAllReplies&&U.length>3&&we("div",{className:f.show_all_responses,onClick:function(){return e.showAllResponses()}},void 0,"Show all responses")))}}])&&Ce(o.prototype,n),r&&Ce(o,r),t}(),ue.defaultProps={userData:void 0,parent:void 0,parentUserName:"",isParent:!0,isPrime:!1,isWapView:!1,openCommentBox:!1,resetCommentBoxId:function(){},errorMsg:"",shouldShowFlagForm:!1,showVerificationMsg:!1,seoData:{},isHighlighted:!1,level:0,isFollowee:!1,isPrivateUser:!0},xe((de=he).prototype,"onVoteUp",[ce],Object.getOwnPropertyDescriptor(de.prototype,"onVoteUp"),de.prototype),xe(de.prototype,"onVoteDown",[le],Object.getOwnPropertyDescriptor(de.prototype,"onVoteDown"),de.prototype),xe(de.prototype,"showAddCommentBox",[pe],Object.getOwnPropertyDescriptor(de.prototype,"showAddCommentBox"),de.prototype),xe(de.prototype,"handleShowHideResponse",[me],Object.getOwnPropertyDescriptor(de.prototype,"handleShowHideResponse"),de.prototype),de),Ue=o(971),He=o.n(Ue);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t,o,n){De||(De="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});if(1===r)t.children=n;else if(r>1){for(var a=new Array(r),c=0;c<r;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:De,type:e,key:void 0===o?null:""+o,ref:null,props:t,_owner:null}}function ze(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e,t,o,n,i){var r={};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=o.slice().reverse().reduce(function(o,n){return n(e,t,o)||o},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var Ke=Xe("i",{className:"icon uparrow"}),Ze=Xe("i",{className:"icon downarrow"}),Je=(ke=Object(ve.a)({}),Ne=Object(ve.a)({}),Ie=Object(ve.a)({}),Te=Object(ve.a)({}),Ge((Pe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?qe(e):t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))).flagHandler=function(){e.props.flagHandler(e.props.data)},e.onVoteUp=e.onVoteUp.bind(qe(e)),e.onVoteDown=e.onVoteDown.bind(qe(e)),e.openAddCommentBox=e.openAddCommentBox.bind(qe(e)),e.handleCommentClick=e.handleCommentClick.bind(qe(e)),e}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),o=t,(n=[{key:"onVoteUp",value:function(){this.props.putVote(this.props.data,!0)}},{key:"onVoteDown",value:function(){this.props.putVote(this.props.data)}},{key:"openAddCommentBox",value:function(e,t){this.props.openAddCommentBox(t)}},{key:"handleCommentClick",value:function(e,t){this.props.onClick(t)}},{key:"render",value:function(){var e,t,o=this,n=this.props.data,i=n.A_D_N,r=n.F_NAME,s=n.C_T,a=n.AC_A_C,c=n.AC_D_C,l=n.C_A_ID,p=n.addedNow,m=i||r,d=this.props,u=d.data,h=d.isPrivateUser,f=u.user_detail&&u.user_detail.thumb?u.user_detail.thumb:"",g=(e=s,(t=document.createElement("div")).innerHTML=e,t.innerText),v=u.user_detail&&u.user_detail.D_N_U?u.user_detail.D_N_U:null,b=u.user_detail&&u.user_detail._id?u.user_detail._id:null,y=l,_=!(!u.user_detail||!u.user_detail.U_P_S||-1===[1,3,4,5,8].indexOf(parseInt(u.user_detail.U_P_S,10)));return Xe("div",{className:"".concat(He.a.innercomment_box," ").concat(y?He.a.aucmt:""," ").concat(this.props.isPrime?He.a.prime:""," ").concat(_?He.a.primeuser:""),onClick:function(e){return o.handleCommentClick(e,o.props.id)}},void 0,!h&&Xe("div",{className:"user_thumbnail","data-ga":"comment-profile_photo-below_as|userid_".concat(b)},void 0,this.props.renderUserIcon(f,"comment-profile_photo-below_as|userid_".concat(b))),Xe("div",{className:"comment_right"},void 0,h||!v&&!b?Xe("span",{className:"name ".concat(He.a.name)},void 0,m||""):Xe(L.a,{to:"http://mytimes.indiatimes.com/profile/".concat(v||b),className:"name ".concat(He.a.name),target:"_blank",rel:"noopener noreferrer nofollow","data-ga":"comment-profile_name-below_as|userid_".concat(b)},void 0,m),Xe("p",{className:"short_comment",dangerouslySetInnerHTML:{__html:unescape(g&&g.length>150?"".concat(g.substr(0,150),"..."):g)}}),!h&&!p&&Xe("div",{className:"footbar clearfix"},void 0,Xe("span",{className:"reply_txt","data-ga":"comment-reply-below_as|msid_".concat(this.props.msid),onClick:function(e){return o.openAddCommentBox(e,o.props.id)}},void 0,"Reply"),Xe("span",{className:"upContainer","data-ga":"comment-upvote-below_as|commentid_".concat(this.props.id),onClick:function(e){return o.onVoteUp(e)}},void 0,Ke,Xe("span",{},void 0,a)),Xe("span",{className:"downContainer","data-ga":"comment-downvote-below_as|commentid_".concat(this.props.id),onClick:function(e){return o.onVoteDown(e)}},void 0,Ze,Xe("span",{},void 0,c)),this.props.isPrime&&Xe("span",{className:"flagicon",onClick:function(){return o.flagHandler()}}))))}}])&&ze(o.prototype,n),r&&ze(o,r),t}()).prototype,"onVoteUp",[ke],Object.getOwnPropertyDescriptor(Pe.prototype,"onVoteUp"),Pe.prototype),Ge(Pe.prototype,"onVoteDown",[Ne],Object.getOwnPropertyDescriptor(Pe.prototype,"onVoteDown"),Pe.prototype),Ge(Pe.prototype,"openAddCommentBox",[Ie],Object.getOwnPropertyDescriptor(Pe.prototype,"openAddCommentBox"),Pe.prototype),Ge(Pe.prototype,"handleCommentClick",[Te],Object.getOwnPropertyDescriptor(Pe.prototype,"handleCommentClick"),Pe.prototype),Pe);Je.defaultProps={data:{A_D_N:"",F_NAME:"",C_T:"",AC_A_C:0,AC_D_C:0},isPrime:!1,msid:"",isPrivateUser:!0};var Ye,Qe,$e,et,tt,ot,nt=Je;function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t,o,n){ot||(ot="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});if(1===r)t.children=n;else if(r>1){for(var a=new Array(r),c=0;c<r;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:ot,type:e,key:void 0===o?null:""+o,ref:null,props:t,_owner:null}}function st(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function at(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e,t,o,n,i){var r={};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=o.slice().reverse().reduce(function(o,n){return n(e,t,o)||o},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var pt=rt("i",{}),mt=rt("i",{}),dt=(Ye=Object(ve.a)({}),Qe=Object(ve.a)({}),$e=Object(ve.a)({}),et=Object(ve.a)({}),lt((tt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?ct(e):t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))).onFlagClick=function(t){var o;if(e.props.isUserLoggedin(e.props.userData)){var n=(0,e.props.isValidRating)(t.A_ID,b.a.OFFENSIVE,1,t._id);n.isValid?e.setState((st(o={},"errorMsg-".concat(t._id),""),st(o,"shouldShowFlagForm-".concat(t._id),!e.state["shouldShowFlagForm-".concat(t._id)]),o)):e.setState(st({},"errorMsg-".concat(t._id),n.errorMsg))}else e.openLoginBox(!0)},e.onVote=function(t,o){if(e.props.isUserLoggedin(e.props.userData)){var n=o?"AGREED":"DISAGREED",i=e.props.isValidRating,r=(o?t.AC_A_C:t.AC_D_C)+1,s=i(t.A_ID,n,r,t._id);s.isValid?(e.setState(st({},"errorMsg-".concat(t._id),"")),e.props.putVote(t._id,n,r,t.msid)):e.setState(st({},"errorMsg-".concat(t._id),s.errorMsg))}else e.openLoginBox(!0)},e.openAddCommentBox=function(t){e.setState({openedAddCommentBoxId:t||""})},e.resetCommentBoxId=function(){e.setState({openedAddCommentBoxId:""})},e.showThread=function(t){e.props.openSidebar(e.props.msid),Object(d.u)()||(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"),e.setState({highlightedId:t})},e.hideFlag=function(t){e.setState(st({},"shouldShowFlagForm-".concat(t),!1))},e.hideChangeViewLoader=function(){e.setState({showChangeViewLoader:!1})},e.showChangeViewLoader=function(){e.setState({showChangeViewLoader:!0})},e.hideLoadMoreCommentsLoader=function(){e.setState({showLoadMoreLoader:!1})},e.getNoCommentText=function(){var t=e.props.commentsData||[],o="";return 0===(t&&t[0]&&t[0].totalcount||0)?o="Be the first one to review.":"discussed"!==e.sortType||t[0].countPresent?"disagree"!==e.sortType||t[0].countPresent||(o="None of the comments have been down voted."):o="None of the comments have been discussed.",o},e.hideFixedHeader=function(){e.setState({showFixedHeader:!1})},e.isElementInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},e.handleScrollStop=function(){var t=document.getElementById("comment-sidebar-input-".concat(e.props.msid));t&&(e.isElementInViewport(t)||e.state.showFixedHeader?e.setState({showFixedHeaderIcon:!1}):e.setState({showFixedHeaderIcon:!0}))},e.getReadCommentsBtn=function(t){var o=t>1?"comments":"comment",n=e.props.readCommentsTxt||"Read ".concat(t," ").concat(o),i=e.props.styles;return 0!==t?e.props.redirectBtnClick?rt("a",{className:"".concat(i.cmtbtn," ").concat(i.view),href:"/articleshow_comments/".concat(e.props.msid,".cms")},void 0,n):rt("span",{className:"".concat(i.cmtbtn," ").concat(i.view," cmtbtn view"),"data-ga":"comment-view-below_as|msid_".concat(e.props.msid),onClick:function(t){return e.onSidebarOpenClose(t,!0)}},void 0,n):null},e.postCommentHandler=function(t){e.onSidebarOpenClose(t,!0),setTimeout(function(){e.props.commentTextInputRef.current.focus()},0)},e.getPostCommentBtn=function(){var t=e.props.styles,o=e.props.postCommentText||"Post a comment";return"4.0"===e.props.commentModeration?null:e.props.redirectBtnClick?rt("a",{className:"".concat(t.cmtbtn," ").concat(t.add),href:"/articleshow_comments/".concat(e.props.msid,".cms")},void 0,rt("span",{className:"icon"},void 0,o)):rt("span",{className:"".concat(t.cmtbtn," ").concat(t.add," cmtbtn add"),"data-ga":"comment-add-below_as|msid_".concat(e.props.msid),onClick:function(t){return e.postCommentHandler(t)}},void 0,rt("span",{className:"icon"},void 0,o))},e.state={openedAddCommentBoxId:"",showLoadMoreLoader:!1,showChangeViewLoader:!1,showFixedHeader:!1,showFixedHeaderIcon:!1,highlightedId:""},e.renderCommentList=e.renderCommentList.bind(ct(e)),e.onSidebarOpenClose=e.onSidebarOpenClose.bind(ct(e)),e.renderLogin=e.renderLogin.bind(ct(e)),e.openLoginBox=e.openLoginBox.bind(ct(e)),e.renderUserIcon=e.renderUserIcon.bind(ct(e)),e.loadMoreComments=e.loadMoreComments.bind(ct(e)),e.handleFixedHeader=e.handleFixedHeader.bind(ct(e)),e.onSortClick=e.onSortClick.bind(ct(e)),e}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),o=t,r=[{key:"getSidebarStyles",value:function(){return{sidebar:{zIndex:2,position:"absolute",top:0,bottom:0,transition:"transform 0.3s ease-out",WebkitTransition:"-webkit-transform 0.3s ease-out",willChange:"transform",overflow:"hidden",paddingRight:"0"},root:{position:"absolute",top:0,right:0,bottom:0,overflow:"hidden",transition:"transform 0.3s ease-out",WebkitTransition:"-webkit-transform 0.3s ease-out",willChange:"transform",left:"100%"}}}}],(n=[{key:"componentDidUpdate",value:function(e){this.props.commentIdHighlighted!==e.commentIdHighlighted&&this.setState({highlightedId:this.props.commentIdHighlighted})}},{key:"renderUserIcon",value:function(e,t){var o=this.props.styles,n={backgroundImage:"url(".concat(e||"https://mytimes.indiatimes.com/image/thumb/0/default",")")};return rt("span",{className:o.user_thumbnail,style:n,"data-ga":t})}},{key:"getCommentItem",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,i=!o||"object"===it(o)&&0===Object.keys(o).length;return rt(Ve,{parent:o,userData:this.props.userData,isUserLoggedin:this.props.isUserLoggedin,openLoginBox:this.openLoginBox,pageMsid:this.props.msid,renderCommentList:this.renderCommentList,handleAddComment:this.props.handleAddComment,putVote:this.onVote,onFlagComment:this.props.onFlagComment,renderUserIcon:this.renderUserIcon,isValidRating:this.props.isValidRating,data:e,parentUserName:e.O_D_N||e.F_NAME,isParent:i,disclaimer:this.props.disclaimer,styles:this.props.styles,isPrime:this.props.isPrime,isWapView:this.props.isWapView,openCommentBox:this.state.openedAddCommentBoxId===e._id,resetCommentBoxId:this.resetCommentBoxId,errorMsg:this.state["errorMsg-".concat(e._id)]||"",onFlagClick:this.onFlagClick,shouldShowFlagForm:this.state["shouldShowFlagForm-".concat(e._id)],hideFlag:this.hideFlag,commentTextInputRef:this.props.commentTextInputRef,showVerificationMsg:this.props.showVerificationMsg,seoData:this.props.seoData,isHighlighted:this.state.highlightedId===e._id,level:n,followUser:this.props.followUser,isPrivateUser:this.props.isPrivateUser,isFollowee:this.props.followees&&-1!==this.props.followees.indexOf(e.user_detail&&e.user_detail._id?e.user_detail._id:"")},e._id)}},{key:"getBottomCommentItem",value:function(e){return rt(nt,{userData:this.props.userData,isUserLoggedin:this.props.isUserLoggedin,openLoginBox:this.openLoginBox,pageMsid:this.props.msid,id:e._id,renderCommentList:this.renderCommentList,renderUserIcon:this.renderUserIcon,data:e,onClick:this.showThread,isPrime:this.props.isPrime,openAddCommentBox:this.openAddCommentBox,putVote:this.onVote,flagHandler:this.onFlagClick,msid:this.props.msid,isPrivateUser:this.props.isPrivateUser},e._id)}},{key:"renderBottomComments",value:function(e){var t=this;return i.a.createElement(i.a.Fragment,null,e&&e.filter(function(e){return e._id}).slice(0,3).map(function(e,o){return t.getBottomCommentItem(e,o)}))}},{key:"renderCommentList",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.props.styles;return rt("ul",{className:i.comments_lists},void 0,e&&e.filter(function(e){return e._id}).map(function(e,i){return t.getCommentItem(e,i,o,n)}))}},{key:"onSortClick",value:function(e){this.showChangeViewLoader();var t=e.target.value;this.props.onSortClick(t,this.hideChangeViewLoader),this.sortType=t}},{key:"renderSortOptions",value:function(e){return rt("select",{id:"sort","data-ga":"comment-sort-comment_section|msid_".concat(this.props.msid),onChange:this.onSortClick},void 0,e.map(function(e){return rt("option",{"data-type":e.label},e.label,e.label)}))}},{key:"renderError",value:function(){this.props.config.messages.login_required}},{key:"openLoginBox",value:function(){this.props.isUserLoggedin(this.props.userData)||this.props.toggleLoginBox(!0)}},{key:"renderLogin",value:function(){return rt("div",{},void 0,!this.props.isUserLoggedin(this.props.userData)&&rt("h3",{onClick:this.openLoginBox},void 0,"Login to add a comment"))}},{key:"getScrollHeight",value:function(){var e=document.documentElement.clientHeight;return this.props.isPrime?e:e-51}},{key:"loadMoreComments",value:function(){this.setState({showLoadMoreLoader:!0}),this.props.loadMoreComments(this.hideLoadMoreCommentsLoader)}},{key:"getSideBarHtml",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=this.getNoCommentText(s);return rt("div",{className:e.comment_scroll},void 0,rt("div",{className:e.comment_topwrite},void 0,!this.props.isPrivateUser&&"4.0"!==this.props.commentModeration&&rt(ne,{shouldAlwaysShow:!0,userData:this.props.userData,openLoginBox:this.openLoginBox,isUserLoggedin:this.props.isUserLoggedin,handleAddComment:this.props.handleAddComment,pageMsid:this.props.msid,getMsid:void 0,getImmediateParent:void 0,getParentComment:void 0,renderUserIcon:this.renderUserIcon,disclaimer:this.props.disclaimer,styles:e,prime:this.props.isPrime,isWapView:this.props.isWapView,mainCommentBox:!0,showFixedHeader:this.state.showFixedHeader,hideFixedHeader:this.hideFixedHeader,commentTextInputRef:this.props.commentTextInputRef,showVerificationMsg:this.props.showVerificationMsg,seoData:this.props.seoData}),!this.props.isWapView&&!this.props.isPrime&&a&&rt("div",{className:e.noComment},void 0,a),this.props.isPrime&&s>0&&rt("span",{className:e.sortby},void 0,this.renderSortOptions(this.props.getSortTypeData())),this.state.showChangeViewLoader?rt("div",{className:e.loader},void 0,pt):i.a.createElement(i.a.Fragment,null,this.renderCommentList(o,n)),r&&i.a.createElement(i.a.Fragment,null,this.state.showLoadMoreLoader&&rt("div",{className:e.loader},void 0,mt),!this.state.showLoadMoreLoader&&!this.state.showChangeViewLoader&&rt("div",{className:e.loadmore,"data-ga":"comment-view_more-comment_section|msid_".concat(this.props.msid),onClick:function(e){return t.loadMoreComments(e)}},void 0,"View more comments"))))}},{key:"handleFixedHeader",value:function(){this.setState({showFixedHeader:!0,showFixedHeaderIcon:!1})}},{key:"renderSidebar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t[0]&&t[0].totalcount||0,s=this.props.styles,a=!this.props.hideBottomComments&&(this.props.isWapView||Object(d.u)());return i.a.createElement(i.a.Fragment,null,rt("div",{className:"".concat(s.comment_header," ").concat(this.props.isTablet?s.ipad:"")},void 0,this.props.isPrime?"":"All ","Comments ",rt("span",{className:s.lightText},void 0,"(",r,")"),!this.props.isPrivateUser&&!this.props.isPrime&&!this.props.isWapView&&this.state.showFixedHeaderIcon&&rt("span",{"data-ga":"comment-add-comment_section|msid_".concat(this.props.msid),className:s.addcommentheader,onClick:function(t){return e.handleFixedHeader(t)}}),!this.props.isPrime&&r>0&&rt("span",{className:s.sortby},void 0,rt("label",{htmlFor:"sort",className:s.sortText},void 0," ","sort"),this.renderSortOptions(this.props.getSortTypeData())),rt("span",{className:s.close,onClick:function(t){return e.onSidebarOpenClose(t)}},void 0,"+")),a&&rt("div",{className:s.mobilecomment},void 0,this.getSideBarHtml(s,t,o,n,r)),!a&&rt(R.Scrollbars,{style:{height:this.getScrollHeight(),width:this.props.isPrime?430:425},universal:!0,onScrollStop:this.handleScrollStop},void 0,this.getSideBarHtml(s,t,o,n,r)))}},{key:"onSidebarOpenClose",value:function(e,t){var o="boolean"==typeof t&&t?t:!(this.props.sidebarOpenMsid===this.props.msid);o?Object(d.u)()&&!this.props.hideBottomComments||(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"):(document.body.style.overflow="",document.documentElement.style.overflow=""),this.props.openSidebar(o?this.props.msid:""),this.setState({showFixedHeader:!1,highlightedId:""})}},{key:"render",value:function(){var e=this,o=this.props.commentsData||[],n=o.length>0?o.length-1:0,r=o[0]&&o[0].totalcount||0,s=t.getSidebarStyles(),a=this.renderSidebar(o,{},r>n),c=this.props.styles;return rt("div",{className:c.commentsContainer},void 0,i.a.createElement(i.a.Fragment,null,this.props.isTimelineVisible&&rt("div",{onClick:function(t){return e.showThread(t)}},void 0,rt(B.a,{stickyClass:c.sticky,outerContainerClass:c.commentsWrapper,offsetFromTop:450},void 0,rt("div",{className:"".concat(c.comment_title," ").concat(c.commentTicker," appOnlyComment")},void 0,r>0?rt("span",{className:c.lightText},void 0,r):rt("span",{className:c.lightText1},void 0,"+")))),!this.props.isTimelineVisible&&!this.props.hideBottomComments&&i.a.createElement(i.a.Fragment,null,!this.props.isTablet&&rt("div",{className:c.cmtbtnwrapper},void 0,this.getReadCommentsBtn(r),!this.props.isPrivateUser&&this.getPostCommentBtn()),!this.props.isWapView&&!this.props.isTablet&&rt("div",{className:c.comments_box},void 0,this.renderBottomComments(o)))),(!this.props.isTablet||this.props.hideBottomComments)&&rt(E,{pullRight:!0,transitions:!0,rootClassName:"".concat(c.root," ").concat(this.props.msid===this.props.sidebarOpenMsid?c.open:""),sidebarClassName:c.comment_sidebar,styles:s,sidebar:a,onSetOpen:this.onSidebarOpenClose,open:this.props.msid===this.props.sidebarOpenMsid}),!this.props.hideBottomComments&&(this.props.isTablet||this.props.isPrime&&this.props.isWapView)&&rt("div",{className:c.commentsipad},void 0,a))}}])&&at(o.prototype,n),r&&at(o,r),t}()).prototype,"onSortClick",[Ye],Object.getOwnPropertyDescriptor(tt.prototype,"onSortClick"),tt.prototype),lt(tt.prototype,"loadMoreComments",[Qe],Object.getOwnPropertyDescriptor(tt.prototype,"loadMoreComments"),tt.prototype),lt(tt.prototype,"handleFixedHeader",[$e],Object.getOwnPropertyDescriptor(tt.prototype,"handleFixedHeader"),tt.prototype),lt(tt.prototype,"onSidebarOpenClose",[et],Object.getOwnPropertyDescriptor(tt.prototype,"onSidebarOpenClose"),tt.prototype),tt);dt.defaultProps={userData:void 0,commentsData:void 0,isTimelineVisible:!1,postCommentText:void 0,readCommentsTxt:void 0,redirectBtnClick:!1,sidebarOpenMsid:"",openSidebar:function(){},isTablet:!1,isPrime:!1,isWapView:!1,showVerificationMsg:!1,seoData:{},commentIdHighlighted:-1,hideBottomComments:!1,followees:[],isPrivateUser:!0,commentModeration:""};var ut=dt;function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function gt(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var bt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=vt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))).state={},e}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),o=t,(n=[{key:"render",value:function(){return i.a.createElement(ut,ft({},this.props,{styles:_.a}))}}])&&gt(o.prototype,n),r&&gt(o,r),t}(),yt=o(972),_t=o.n(yt);function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function St(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xt(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var Ot=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=xt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))).state={},e}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),o=t,(n=[{key:"render",value:function(){return i.a.createElement(ut,Ct({},this.props,{styles:_t.a,isPrime:!0}))}}])&&St(o.prototype,n),r&&St(o,r),t}();function kt(e){var t=!1;return e&&e.isLoggedIn&&e.getUid()&&(t=!0),t}var Nt,It=o(64);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Dt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){jt(e,t,o[t])})}return e}function jt(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Ft(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Bt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?Et(e):t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))).loadMoreComments=function(t){var o=e.pageNum+1,n={msid:e.props.msid,pagenum:o},i=e.getSortConfig(e.sortConfig);e.pageNum=o,i&&(n=Dt({},i,n),e.props.getMoreComments(n,t))},e.putVote=function(o,n,i,r){var s=t.getVoteTypeId(n),a="https://myt.indiatimes.com/mytimes/addActivity",c={appKey:"TOI",parentCommentId:o,activityType:s.type,baseEntityType:"ARTICLE",objectType:"A",url:window.location.href};a+="?".concat(Object(ye.a)(c));l()(a,null,function(){Object(ye.c)(o,s.id,0,i),e.props.updateVoteCount({msid:r,commentId:o,voteType:n,voteCount:i})}),e.rateComment(o,s.id)},e.getComments=function(){return e.props.comments&&e.props.comments.commentsData?e.props.comments["commentsData-".concat(e.props.msid)]:[]},e.handleAddComment=function(t,o){var n=e.props.userData,i=n&&"function"==typeof n.getUid&&n.getUid(),r=Dt({},o?{fromname:o.name,fromaddress:o.email,userid:"",location:o.loc,imageurl:""}:{fromname:n.getFullName(),fromaddress:n.getEmail(),userid:n.getUid(),location:n.getCITY(),imageurl:n.getIcon()},{loggedstatus:i?1:0,roaltdetails:1,configid:41083278,urs:"",rotype:0}),s=Dt({},r,t,{url:be.l+window.location.pathname});i||(s.verifyuser=1),e.validateComment(s,function(){b.b.sendCommentLiveEmail,s.pcode="TOI",e.props.postComment(s,e.handlePostCommentResponse.bind(Et(e)))})},e.getSortConfig=function(t){var o=Object(b.f)().filter(function(e){return e.label===t});if(e.sortConfig=t,e.pageNum=1,o.length)return o[0].queryParams},e.onSortClick=function(t,o){var n=e.getSortConfig(t);n&&e.handleSort(n,o)},e.followUser=function(t){e.props.followUser(t)},e.openSidebar=function(t){e.props.openSidebar(t),e.props.toggleNIC(!1)},e.onFlagComment=function(t,o){e.props.onFlagComment(t,o),e.rateComment(t.ofcommenteroid,103)},e.rateComment=function(e,t){It.a.get("/ratecomment_new.cms?opinionid=".concat(e,"&typeid=").concat(t,"&rateid=0"),{},"skipfeedengine")},e.state={showVerificationMsg:!1},e.handleSort.bind(Et(e)),e.pageNum=1,e.sortConfig="upvoted",e.isUserLoggedin=!1,e}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),o=t,r=[{key:"getVoteTypeId",value:function(e){var t={};return"AGREED"===e||100===parseInt(e,10)?t={type:"Agreed",id:"100"}:"DISAGREED"===e||101===parseInt(e,10)?t={type:"Disagreed",id:"101"}:103!==parseInt(e,10)&&"OFFENSIVE"!==e||(t={type:"OFFENSIVE",id:"103"}),t}}],(n=[{key:"componentDidMount",value:function(){this.loadComments(),!1===this.props.hasFolloweesData&&this.loadFollowees()}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.msid!==e.msid&&(this.sortConfig="upvoted",this.loadComments()),setTimeout(function(){!1===t.props.hasFolloweesData&&t.loadFollowees()},0)}},{key:"loadFollowees",value:function(){var e=kt(this.props.userData);e!==this.isUserLoggedin&&(this.props.loadFollowees(),this.isUserLoggedin=e)}},{key:"loadComments",value:function(){var e={msid:this.props.msid,pagenum:this.pageNum},t=this.getSortConfig(this.sortConfig);t&&(e=Dt({},t,e),this.props.getCommentsData(e))}},{key:"isValidRating",value:function(e,o,n,i){var r,s=this.props.userData,a=void 0===s?{}:s,c=b.b.messages,l=kt(a),p=!0,m=t.getVoteTypeId(o),d=o.toUpperCase(),u=Object(ye.b)(i,m.id,0)||{},h=t.getVoteTypeId(u.typeid||u.offensiveId).type||"";h=h.toUpperCase();var f=u.offensiveId||"",g=t.getVoteTypeId(f).type||"";if(g=g.toUpperCase(),l&&e===a.getId())switch(p=!1,d){case b.a.AGREED:r=c.self_agree;break;case b.a.DISAGREED:r=c.self_disagree;break;case b.a.OFFENSIVE:r=c.self_offensive}else if(u.count&&u.count>0&&(d===h||d===g))switch(p=!1,d){case b.a.AGREED:r=c.already_agree;break;case b.a.DISAGREED:r=c.already_disagree;break;case b.a.OFFENSIVE:r=c.already_offensive}else u.count&&u.count>0&&(h===b.a.AGREED&&d===b.a.DISAGREED?(p=!1,r=c.cant_agree_disagree):h===b.a.DISAGREED&&d===b.a.AGREED?(p=!1,r=c.cant_agree_disagree):h===b.a.AGREED&&d===b.a.OFFENSIVE?(p=!1,r=c.cant_agree_offensive):g===b.a.OFFENSIVE&&d===b.a.AGREED&&(p=!1,r=c.cant_agree_offensive));return{isValid:p,errorMsg:r}}},{key:"createCommentObjectFromData",value:function(e){var t=this.props.userData,o=void 0===t?{}:t,n={_id:Date.now(),F_NAME:e.fromname,CITY:e.location,C_D:Date.now(),addedNow:1,C_T:e.message,AC_A_C:0,AC_D_C:0};return o.isLoggedIn&&o.getId()&&(n.A_ID=o.getId(),n.user_detail=n.user_detail||{},n.user_detail.thumb=o.getThumb()||"",n.user_detail.U_P_S=Object(d.t)()),n}},{key:"findParentCommentInData",value:function(e,t){for(var o,n=0;n<e.length;n+=1)if(e[n]._id){if(e[n]._id===t){o=e[n];break}if(e[n].CHILD&&e[n].CHILD.length&&(o=this.findParentCommentInData(e[n].CHILD,t)))break}else;return o}},{key:"handlePostCommentResponse",value:function(e,t){e.data&&e.data.toLowerCase();var o=this.props.userData;o&&"function"==typeof o.getUid&&o.getUid()?(this.addCommentToState(t),this.setState({showVerificationMsg:!1})):this.setState({showVerificationMsg:!0})}},{key:"addCommentToState",value:function(e){var t,o=this.createCommentObjectFromData(e),n=Object.assign([],this.getComments()),i=e.parentid;0===parseInt(i,10)?(Object(d.p)(n,1,o),n[0].totalcount+=1):((t=this.findParentCommentInData(n,i)).CHILD||(t.CHILD=[]),Object(d.p)(t.CHILD,1,o)),this.props.updateComments({msid:this.props.msid,comments:Pt(n)})}},{key:"validateComment",value:function(e,t){var o=this,n=Object(d.n)()+Object(b.d)().endpoint,i=Dt({},Object(b.d)().params,e);a.a.post(n,i).then(function(e){"duplicatecontent"===e.data||"abusivecontent"===e.data||t.call(o,null)}).catch()}},{key:"handleSort",value:function(e,t){var o=Dt({},e,{msid:this.props.msid,pagenum:this.pageNum});this.props.getCommentsData(o,t)}},{key:"render",value:function(){var e=this,t=this.props.isPrime?Ot:bt,o=Object(d.u)();return"3.0"===this.props.commentModeration?null:function(e,t,o,n){Nt||(Nt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});if(1===r)t.children=n;else if(r>1){for(var a=new Array(r),c=0;c<r;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:Nt,type:e,key:void 0===o?null:""+o,ref:null,props:t,_owner:null}}(t,{msid:this.props.msid,commentsData:this.getComments(),handleAddComment:this.handleAddComment,disclaimer:v,getSortTypeData:b.f,userData:this.props.userData,toggleLoginBox:function(t){return e.props.toggleLoginBox(t)},onSortClick:this.onSortClick,onFlagComment:this.onFlagComment,putVote:this.putVote,isValidRating:function(t,o,n,i){return e.isValidRating(t,o,n,i)},config:b.b,isUserLoggedin:kt,isTimelineVisible:this.props.isTimelineVisible,postCommentText:this.props.postCommentText,readCommentsTxt:this.props.readCommentsTxt,redirectBtnClick:this.props.redirectBtnClick,isWapView:this.props.isWapView,openSidebar:this.openSidebar,sidebarOpenMsid:this.props.sidebarOpenMsid,loadMoreComments:this.loadMoreComments,isPrime:this.props.isPrime,isTablet:o,commentTextInputRef:this.props.commentTextInputRef,showVerificationMsg:this.state.showVerificationMsg,seoData:this.props.seoData,commentIdHighlighted:this.props.commentIdHighlighted,hideBottomComments:this.props.hideBottomComments,followUser:this.followUser,followees:this.props.followees,isPrivateUser:this.props.isPrivateUser,commentModeration:this.props.commentModeration})}}])&&Ft(o.prototype,n),r&&Ft(o,r),t}();Bt.defaultProps={userData:void 0,comments:void 0,isTimelineVisible:!1,postCommentText:void 0,readCommentsTxt:void 0,sidebarOpenMsid:"",redirectBtnClick:!1,isWapView:!1,isPrime:!1,commentTextInputRef:i.a.createRef(),toggleNIC:function(){},seoData:{},commentIdHighlighted:-1,hideBottomComments:!1,followees:[],isPrivateUser:!0,hasFolloweesData:!1,commentModeration:""};t.default=Object(r.b)(function(e){return{comments:e.comments,userData:m()(e,"login.userData",{}),sidebarOpenMsid:e.commentscommon.sidebarOpen,commentIdHighlighted:e.commentscommon.commentIdHighlighted,followees:e.comments.followees,isPrivateUser:e.gdpr.isPrivateUser,hasFolloweesData:e.comments.hasFolloweesData}},function(e){return{getCommentsData:function(t,o){e(Object(f.b)(t,o))},getMoreComments:function(t,o){e(Object(f.c)(t,o))},postComment:function(t,o){e(Object(f.f)(t,o))},toggleLoginBox:function(t){e(Object(g.a)(t))},onFlagComment:function(t,o){e(Object(f.e)(t,o))},openSidebar:function(t){e(Object(u.a)(t))},updateVoteCount:function(t){e(Object(f.h)(t))},updateComments:function(t){e(Object(f.g)(t))},toggleNIC:function(t){e(Object(h.n)(t))},followUser:function(t){e(Object(f.a)(t))},loadFollowees:function(){e(Object(f.d)())}}})(Bt)},700:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var n=o(30);function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var r,s=(r="OPEN_SIDEBAR","toi/".concat("commentscommon","/").concat(r));function a(e,t){return{type:s,payload:{msid:e||"",commentId:t||""}}}n.a.register("commentscommon",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){i(e,t,o[t])})}return e}({},e,{sidebarOpen:t.payload.msid||"",commentIdHighlighted:t.payload.commentId||""});default:return e}})},965:function(e,t,o){e.exports={clearfix:"_3ZIbt",mobilecomment:"iDDgB",comment_header:"dIGBB",close:"_1JV6t",comment_input:"_1Cjq_",lightText:"_33mCq",lightText1:"_23814",sortby:"WAFGd",sortText:"_30Wqu",socialpost:"_2XaoW",twitter:"_2ib7u",icontwitter:"_13N87",fb:"_175BK",iconfb:"_1lKR4",commentverificationmsg:"_3nIDd",noComment:"_1luEZ",comment_sidebar:"_1Gr0p",comment_scroll:"_3KyyJ",loadmore:"_3zQcU",loader:"_3nE7k",disclaimer:"_3wqQV",comment_topwrite:"_1BvtK",user_thumbnail:"_1kQk9",numbertxt:"_3wBiR",comment_title:"_1G2bT",noCommenTicker:"_20KpH",commentTicker:"_3OtyW",commentsContainer:"bLzrC",commenttopareafixed:"_355e6",closefixheadersection:"_3HIHr",addcommentheader:"_3Fq7Q",comments_box:"hA0Zz",error:"hzXzi",show_all_responses:"lkvJj",comments_list:"_3tu9Q",gdpr:"_1jvm3",header:"_2T8yX",user_details:"_2ZH3M",comment_text:"_2uauV",aucmt:"_3P736",cmtname:"_2i989",highlighted:"_1NWzy",highlight:"_2rTDQ",top_input:"_2Ijk4",signinform:"_3WCiP",point_tooltip:"lvUVk",popup_above:"_1rKiJ","heading-block":"_9N7Yf",level:"_3GezN",more:"_4Az_0",content:"_36ubv",section:"_2sbV_",name:"Hx3jR",badgepoint:"_1L0SY","info-txt":"HiDZ2",reasons:"WnJZ9","success-message":"_1lPc3",buttons:"usQjt",button:"_1XBfJ","more-info":"_3WwZ9",cont_left:"_2G-3v",cont_right:"_3uczL",comment_actions:"_3wAPo",point_container:"_1I42N",tooltip_wrap:"_3zb8D",gold:"_1otZt",platinum:"_3XFe-",silver:"_2HEW2",bronze:"_2sWiq",badges:"_3teje",follow:"_1Kg8k",iconreply:"_3zDWo",truncated:"_2FVHz",readmorecomment:"_3VM28",flagComment:"_3c5QW",tooltip_up:"_1i9i8",comment_reply:"IhmY9",comment_response:"RoZk5",upContainer:"_23uA0",downContainer:"_20ocg",userfollowing:"_3Ww3J",iconfollow:"_1Zgco",voteUp:"_29KSh",voteDown:"_3Aj9L",indentRight:"_1WCgZ",root:"_3N_op",open:"_2p8v2",commentsWrapper:"KeLwh",sticky:"_1lA1o",cmtbtnwrapper:"_2sCYw",sociallogin:"SY9CB",hide_noreg:"_1qVyO",mathbox:"_1Hbmk",textbox:"_2crx3",signin:"TEPvQ",divider:"_3Ls9m",location:"_31qjl",submit1:"Gl9ko",socialsignin:"_2nfPg",google:"_3kB7v",email:"_3jS89",commentposterror:"_2w1vv",primeuser:"U9_IT"}},966:function(e,t,o){var n=o(967);e.exports=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){n(e,t,o[t])})}return e}},967:function(e,t){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},968:function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},969:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},970:function(e,t,o){(function(t){var o=1/0,n="[object Symbol]",i=/&(?:amp|lt|gt|quot|#39|#96);/g,r=RegExp(i.source),s="object"==typeof t&&t&&t.Object===Object&&t,a="object"==typeof self&&self&&self.Object===Object&&self,c=s||a||Function("return this")();var l,p=(l={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},function(e){return null==l?void 0:l[e]}),m=Object.prototype.toString,d=c.Symbol,u=d?d.prototype:void 0,h=u?u.toString:void 0;function f(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&m.call(e)==n}(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":f(t))&&r.test(e)?e.replace(i,p):e}}).call(this,o(39))},971:function(e,t,o){e.exports={cmtbtnwrapper:"_1XXx1",innercomment_box:"_1J0sM",aucmt:"_3c-lJ",name:"_3_2lB",prime:"_2X2Hu"}},972:function(e,t,o){e.exports={clearfix:"_1QnkB",diplaynoneM:"mT5eV",sortby:"FSU8c",loadmore:"_2H3Rm",comment_input:"_290TN",commentsContainer:"gbJ5d",comments_list:"_28UZY",header:"_2wiKg",point_container:"_1w24L",comment_actions:"_1BtqS",signinform:"diUKv",divider:"sloHj",socialsignin:"_11oUT",comment_header:"PImgn",close:"_1Xtwn",indentRight:"wdpny",commentverificationmsg:"_2ZpIz",comment_sidebar:"_22Vlu",comment_scroll:"_2ckwP",disclaimer:"_2Xuq1",loader:"_3CPki",comment_topwrite:"_32xMg",numbertxt:"_2B-Jg",comment_title:"_1du-z",noCommenTicker:"_38EjJ",commentTicker:"wh_1_",comments_box:"_1-Int",error:"_3bojS",show_all_responses:"_2FBDU",commentposterror:"_3ltLE",user_thumbnail:"cCW2h",point_tooltip:"_2TiGe",popup_above:"_210hi","heading-block":"dwD6e",level:"_1xq9v",more:"_1Db2t",content:"_44u6k",section:"_3tPQ7",name:"_3MNiS",badgepoint:"_2bCqk","info-txt":"dqlkb",reasons:"_3WfxZ","success-message":"_32wWg",buttons:"_5K1Ip",button:"_2H1eu","more-info":"RZr9O",cont_left:"C1dJP",cont_right:"_1ZIoF",comment_text:"_30Dfr",tooltip_wrap:"_2N8xp",gold:"_1FT81",platinum:"_2ZfTj",silver:"_1j6A7",bronze:"pjAx8",badges:"_2LUgF",user_details:"_1RGd4",truncated:"_1uwKu",readmorecomment:"_1LuwP",flagComment:"_1e7Hj",flagicon:"_3FVWS",tooltip_up:"_2kNWp",upContainer:"N78hC",downContainer:"Knf_m",voteUp:"LpuWq",voteDown:"_2Eimn",root:"jv-lU",open:"ZzSTi",commentsWrapper:"_1TDxV",sticky:"_23NHl",cmtbtnwrapper:"_39Ute",signin:"_1NQ-i",sociallogin:"qTJf7",socialpost:"xPdPo",hide_noreg:"_3XQfz",mathbox:"_2dpDi",textbox:"_2Bt3M",location:"_2YJGd",submit1:"_10znB",fb:"ma9Ai",google:"_2i-3E",email:"_2CZhg"}}}]);
//# sourceMappingURL=withcomments.b21ea533.chunk.js.map